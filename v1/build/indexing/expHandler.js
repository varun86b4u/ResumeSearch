/*! resume 2015-11-19 */
var expParser=require("../data-parser/expParser"),atob=require("atob"),expHandler=function(a){this.callback=a,this.strArr=[],this.results=[]};expHandler.prototype={parse:function(a){var b=this.getExperienceStrings(a);this.strArr=b,b.forEach(function(a,b){this.tryParseStrings(a)}.bind(this))},getExperienceStrings:function(a){var b=atob(a),c=[];b=this.removeSpecialCharacters(b);var d=["experience","exp"];return d.forEach(function(a){for(var d=b.indexOf(a);d>=0;)c.push(b.substring(d-40,d+40)),d=b.indexOf(a,d+1)}),console.log(c,"test"),c},tryParseStrings:function(a){(new expParser).parse(a,function(a){this.results.push(a),this.results.length===this.strArr.length&&this.handleParseResults()}.bind(this))},handleParseResults:function(){},removeSpecialCharacters:function(a){var b=a.toLowerCase();return b=b.replace(/\\/g,"").replace(/'/g,"").replace(/\t/g," "),b=b.replace(/:/g,"").replace(/‘/g,"").replace(/”/g,"").replace(/“/g,""),b=b.replace(/’/g,"").replace(/-/g," "),b=b.replace(/\r\n/g," ").replace(/\n/g," ").replace(/\r/g," ").replace(/\\\\/g,""),b=b.replace(/\f/g,"")}},module.exports=expHandler;